package steps.poolBackoffice;

import engine.Driver;
import io.cucumber.datatable.DataTable;
import io.cucumber.java.en.And;
import io.cucumber.java.en.Given;
import org.openqa.selenium.WebDriver;
import pages.poolBackofficeObjects.DashboardPoolBackofficeObjects;
import pages.poolBackofficeObjects.MatchesPoolBackofficeObjects;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.List;

public class OpenTestMatch {


    private WebDriver driver;

    public OpenTestMatch(Driver driver) {
        this.driver = driver.get();


    }


    @Given("i click the games header dropdown")
    public void iClickTheGamesHeaderDropdown() {

        //Click pool header button
        DashboardPoolBackofficeObjects page = new DashboardPoolBackofficeObjects(driver);
        page.clickGamesDropdown();


    }

    @And("i click matches")
    public void iClickMatches() {


        //click Matches
        DashboardPoolBackofficeObjects page = new DashboardPoolBackofficeObjects(driver);
        page.clickMatches();
    }

    @And("i click the create match button")
    public void iClickTheCreateMatchButton() {

        // create match display
        MatchesPoolBackofficeObjects page = new MatchesPoolBackofficeObjects(driver);
        page.clickCreateMatch();
    }

    @And("i input match details")
    public void iInputMatchDetails(DataTable matchDetails) {

        //get the value list from feature file
        List<List<String>> data = matchDetails.asLists(String.class);
        String selectedSports = data.get(1).get(0);
        String selectedLeague = data.get(1).get(1);
        String matchCountInput = data.get(1).get(2);

        //input match details
        MatchesPoolBackofficeObjects page = new MatchesPoolBackofficeObjects(driver);
        page.selectSports(selectedSports);
        page.selectLeague(selectedLeague);

        // generate date today
        DateFormat dateFormat = new SimpleDateFormat("MM-dd-yyyy");
        Date referenceDate = new Date();
        Calendar c = Calendar.getInstance();
        c.setTime(referenceDate);
        Date currentDatePlusOne = c.getTime();
        String dateToday = dateFormat.format(currentDatePlusOne);

        //  System.out.println("111111111111111" + dateToday);

        page.inputDate(dateToday);

        page.inputMatchCount(matchCountInput);
    }

    @And("i click submit button")
    public void iClickSubmitButton() {
    }

    @And("i select view match details from action dropdown")
    public void iSelectViewMatchDetailsFromActionDropdown() {
    }

    @And("i click open bet status")
    public void iClickOpenBetStatus() {
    }
}
